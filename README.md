# HealthCare Management System - Frontend (Client)

Short description: A modern Next.js (App Router) web client for the HealthCare Management System. Includes public pages (Doctors listing/details, Consultation), and role-based dashboards for `ADMIN`, `DOCTOR`, and `PATIENT`.

![Next.js](https://img.shields.io/badge/Next.js-16+-black)
![React](https://img.shields.io/badge/React-19+-blue)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue)
![Tailwind](https://img.shields.io/badge/TailwindCSS-v4-teal)

## Live Frontend:

https://health-care-client-rust.vercel.app/

## Live Backend:

https://health-care-server-gamma.vercel.app/

## Live Swagger (API Docs)

- Swagger UI: https://health-care-server-gamma.vercel.app/docs
- OpenAPI JSON: https://health-care-server-gamma.vercel.app/docs-json

This frontend integrates with the backend REST API (Express + Prisma) and provides:
Backend Repo: https://github.com/EtherSphere01/Health-Care-Server.git

- Doctors discovery with department filtering and pagination
- Appointment booking flow (Consultation) + AI symptom triage
- Video consultation link support (Jitsi `videoCallingId` generated by backend per appointment)
- Notifications UI (fetch + mark read)
- Admin/Doctor/Patient dashboards

---

## üöÄ Key Features

### Public Experience

- **Landing Page:** Backend-driven highlights and sections.
- **Doctors Directory (Public):**
    - `/doctors` list page with backend-driven pagination
    - Department filtering via `specialties` query param
    - Grouped doctors UI + shared `DoctorCard`
- **Doctor Details (Public):** `/doctors/[doctorId]`
- **Consultation Page:** `/consultation` for specialty ‚Üí doctor ‚Üí schedule selection.

### Patient / Doctor / Admin Experience

- **Role-Based Dashboards:**
    - Patient: `/dashboard/*`
    - Doctor: `/doctor/dashboard/*`
    - Admin: `/admin/dashboard/*`
- **Secure Route Guarding:** Requests are redirected to `/login` when protected areas are accessed without a valid auth cookie.
- **Notifications:** In-dashboard notifications dropdown (fetch, mark read, mark all read).
- **Video Call Support:** Appointments include `videoCallingId` and the UI can open the meeting link.

### Authentication

- Login / logout
- Forgot password + reset password
- Patient registration via OTP flow:
    - Request OTP
    - Verify OTP

---

## üõ† Technology Stack

- **Framework:** Next.js (App Router)
- **Language:** TypeScript
- **UI:** Tailwind CSS v4, Radix UI primitives, shadcn-style components
- **State/Data:** Server Actions + route handlers + typed service layer (`src/services/*`)
- **Icons:** lucide-react

---

## ‚öôÔ∏è Prerequisites

Before getting started, ensure you have:

- [Node.js](https://nodejs.org/) (v18+)
- [pnpm](https://pnpm.io/installation) (recommended) / npm / yarn
- The backend API running (see `Health-Care-Server`)

---

## üì¶ Installation & Setup

### 1. Clone the Repository

```bash
git clone https://github.com/EtherSphere01/Health-Care-Client.git
cd health-care-client
```

### 2. Install Dependencies

pnpm:

```bash
pnpm install
```

npm:

```bash
npm install
```

yarn:

```bash
yarn
```

### 3. Environment Configuration

Create a `.env` file in the project root.

```env
NODE_ENV=development

# Backend API base URL
# Local dev:
NEXT_PUBLIC_API_URL=http://localhost:5000/api/v1

# Deployed backend (use this when deploying the frontend):
# NEXT_PUBLIC_API_URL=https://health-care-server-gamma.vercel.app/api/v1

# Used by server-side route guarding / token verification in this codebase.
# Must match the backend JWT secret.
JWT_SECRET=your_backend_jwt_secret

# Used for refresh-token decoding/validation in some auth flows.
# Must match the backend refresh secret.
REFRESH_TOKEN_SECRET=your_backend_refresh_secret
```

Notes:

- `NEXT_PUBLIC_API_URL` is used by the client service layer and route handlers to call the backend.
- `JWT_SECRET` and `REFRESH_TOKEN_SECRET` must match backend values, otherwise redirects/login state can break.

### 4. Run the App

Development:

```bash
pnpm dev
```

Open http://localhost:3000

Production build:

```bash
pnpm build
pnpm start
```

---

## üìú Scripts

| Script     | Description              |
| :--------- | :----------------------- |
| pnpm dev   | Start Next.js dev server |
| pnpm build | Build production bundle  |
| pnpm start | Start production server  |
| pnpm lint  | Run ESLint               |

---

## üß≠ App Routes (High-Level)

### Public

- `/` Landing page
- `/doctors` Doctors listing (public)
- `/doctors/[doctorId]` Doctor details (public)
- `/consultation` Consultation flow (booking requires patient auth)
- `/login`, `/register`, `/verify-otp`, `/forgot-password`, `/reset-password`

### Protected (Role-based)

- Patient: `/dashboard/*`
- Doctor: `/doctor/dashboard/*`
- Admin: `/admin/dashboard/*`

---

## üîå Backend Integration (How data is fetched)

This client uses multiple patterns depending on the feature:

1. **Server Actions / Service Layer**
    - All backend calls are centralized under `src/services/*`.
    - Services use `src/lib/api.ts` which automatically attaches cookies for authenticated requests.

2. **Next.js Route Handlers (API Proxy)**
    - Used for some authenticated actions from the browser, like notifications:
        - `src/app/api/notification/*`
    - These handlers read cookies server-side and forward to the backend.

---

## üîî Notifications

The dashboard navigation fetches notifications via the app route handlers:

- `GET /api/notification/my-notifications`
- `PATCH /api/notification/mark-all-read`
- `PATCH /api/notification/[id]/read`

These proxy to backend:

- `GET /notification/my-notifications`
- `PATCH /notification/mark-all-read`
- `PATCH /notification/:id/read`

---

## üé• Video Consultation (Jitsi)

- The backend generates `appointment.videoCallingId` when a patient books an appointment.
- The client surfaces this link in appointment views (patient/doctor/admin), and uses `getVideoCallUrl()` in `src/lib/utils.ts` to normalize the URL.

---

## üñº Images

Remote images are allowed from:

- Cloudinary (`res.cloudinary.com`)
- Unsplash (`images.unsplash.com`)

Configured in `next.config.ts`.

---

## üóÇ Project Structure (Important Folders)

```text
health-care-client/
	public/                  Static assets
	src/
		app/                   Next.js App Router routes
		components/            UI components (shared/ui/modules)
		hooks/                 Custom hooks (auth, async, pagination)
		lib/                   API client, auth utils, general utilities
		services/              Backend service layer (typed API calls)
		types/                 Shared TypeScript types
```

---

## ‚úÖ Typical Local Development Setup

1. Start the backend (`Health-Care-Server`) at `http://localhost:5000`.
2. Confirm the client `.env` points to `NEXT_PUBLIC_API_URL=http://localhost:5000/api/v1`.
3. Run `pnpm dev` in this project.
